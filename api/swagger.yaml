swagger: "2.0"
info:
  description: "Aimsquant api publisher"
  version: "1.0.0"
  title: "AimsQuant api"
  termsOfService: "http://www.aimsquant.com/terms/"
  contact:
    email: "shiv.chawla@aimsquant.com"
  license:
    name: "Apache 2.0"
    url: "http://www.apache.org/licenses/LICENSE-2.0.html"
host: 'localhost:3002'
basePath: "/api/v2"
tags:
- name: "user"
  description: "Operations about user"
- name: "advisor"
  description: "operations on advisor"
- name: "stock"
  description: "operations on stock"
- name: "watchlist"
  description: "operations on watchlist"
- name: "performance"
  description: "operations on Performance" 
- name: "config"
  description: "getting the static configs"
- name: "contest"
  description: "operations on contest"
- name: "contestentry"
  description: "operations on contest entry"
- name: "dailycontest"
  description: "operations on dailycontest"
  externalDocs:
    description: "Find out more about us"
    url: "http://www.aimsquant.com"

schemes:
- "https"
produces:
- "application/json"
paths:
  /user:
    post:
      tags:
      - "user"
      summary: "Register user"
      description: "User registration api."
      operationId: "registerUser"
      consumes:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "Created user object"
        required: true
        schema:
          $ref: "#/definitions/User"
      - in: query
        name: source
        type: string
        required: false
        default: "adviceqube"
      responses:
        default:
          description: "successful operation"
      x-swagger-router-controller: "User"

  /user/login:
    post:
      tags:
      - "user"
      summary: "User Login"
      description: "User login for all roles. If project_admin tenantName is not required"
      operationId: "userlogin"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "User login description. Check model definition for valid params"
        required: true
        schema:
          $ref: "#/definitions/Login"
      responses:
        200:
          description: "successful login"
        400:
          description: "Not Authorized"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "User"
  
  /user/login_google:
    post:
      tags:
      - "user"
      summary: "User Login using Google"
      description: "User Login use Google OAuth"
      operationId: userGoogleLogin
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "User google login description. Check model definition for valid params"
        required: true
        schema:
          $ref: "#/definitions/GoogleLogin"
      responses:
        200:
          description: "successful login"
        400:
          description: "Not Authorized"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "User"

  /me:
    get:
      tags:
      - 'user'
      summary: 'get profile of user'
      operationId: getProfile
      consumes:
      - application/json
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      security:
      - api_key: []
      responses:
        200:
          description: "successful login"
        400:
          description: "Not Authorized"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "User"

  /user/activate:
    get:
      tags:
      - "user"
      summary: activate user
      description: activate user
      operationId: activateUser
      parameters:
      - in: query
        name: code
        type: string
        required: true
      - in: query
        name: source
        type: string
        required: false
        default: "adviceqube"
      responses:
        200:
          description: OK
      x-swagger-router-controller: "User"

  /user/resetpage:
    get:
      tags:
      - "user"
      summary: Reset api accessed from email
      description: Reset api accessed from email
      operationId: resetEmailLink
      parameters:
      - in: query
        name: code
        type: string
        required: true
      - in: query
        name: source
        type: string
        required: false
        default: "adviceqube"
      responses:
        200:
          description: OK
      x-swagger-router-controller: "User"

  /user/resetpasswordcall:
    post:
      tags:
      - "user"
      summary: Reset password and save new one
      description: Reset password and save new one
      operationId: resetpasswordcall
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: Request body to reset password"
        required: true
        schema:
          type: object
          properties:
            code:
              type: string
              default: 'reply'
            newpassword:
              type: string
            password:
              type: string
      - in: query
        name: source
        type: string
        required: false
        default: "adviceqube"
      responses:
        200:
          description: OK
      x-swagger-router-controller: "User"

  /user/forgotpassword:
    get:
      tags:
      - "user"
      summary: ask for email as parameter
      description: forgot password api
      produces:
      - application/json
      operationId: forgotPassword
      parameters:
      - in: query
        name: email
        required: true
        type: string
        format: email
      - in: query
        name: source
        type: string
        required: false
        default: "adviceqube"
      x-swagger-router-controller: "User"
      responses:
        200:
          description: OK
 
  /user/setpassword:
    post:
      tags:
      - "user"
      summary: reset password by validating with the code
      description: reset password
      operationId: resetPassword
      parameters:
      - in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/resetpassword'
      - in: query
        name: source
        type: string
        required: false
        default: "adviceqube"
      x-swagger-router-controller: "User"
      responses:
        200:
          description: OK
        400:
          description: code is not valid
  
  /user/sendFeedback:
    post:
      tags:
      - "user"
      summary: send feedback to the admin
      description: send feedback
      operationId: sendFeedback
      security: []
      parameters:
      - in: body
        name: body
        required: true
        schema:
           $ref: '#/definitions/Feedback'
      x-swagger-router-controller: "User"
      responses:
        200:
          description: OK
        400:
          description: Error sending email
  
  /user/sendInvite:
    post:
      tags:
      - "user"
      summary: send Invite to list of email
      description: send Invite
      operationId: sendInvite
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - in: body
        name: body
        required: true
        schema:
           $ref: '#/definitions/invite'
      x-swagger-router-controller: "User"
      responses:
        200:
          description: OK
        400:
          description: Error Sending Email

  /user/sendInfoEmail:
    post:
      tags:
      - "user"
      summary: send informational emails froma admin 
      description: send Info Emails (mass)
      operationId: sendInfoEmail
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - in: body
        name: body
        required: true
        schema:
           $ref: '#/definitions/infoEmail'
      x-swagger-router-controller: "User"
      responses:
        200:
          description: OK
        400:
          description: Error Sending Email

  /user/sendTemplateEmail:
    post:
      tags:
      - "user"
      summary: send informational emails from admin using template
      description: send Info Emails 
      operationId: sendTemplateEmail
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: templateId
        in: query
        required: true
        type: string
      - in: query
        name: sender
        required: false
        default: contest
        type: string
      x-swagger-router-controller: "User"
      responses:
        200:
          description: OK
        400:
          description: Error Sending Email

  /user/updateToken:
    put:
      tags:
      - "user"
      summary: Attempt to update token
      description: Update Token
      operationId: updateToken
      parameters:
      - in: body
        name: body
        required: true
        schema:
           $ref: '#/definitions/updateToken'
      x-swagger-router-controller: "User"
      responses:
        200:
          description: OK
        400:
          description: Error Updating Token

  /user/verifyCaptcha:
    post:
      tags:
      - "user"
      summary: Verify captcha token
      description: Verify captcha token
      operationId: verifyCaptchaToken
      parameters:
      - in: body
        name: body
        required: true
        schema:
           $ref: '#/definitions/captchaToken'
      x-swagger-router-controller: "User"
      responses:
        200:
          description: OK
        400:
          description: Error verifying captcha token

  /user/unsubscribe:
    get:
      tags:
      - user
      summary: Unsubsribe from email service
      description: Unsubsribe from email service
      operationId: unsubscribeEmail
      security: []
      parameters:
      - name: email
        in: query
        description: email address of user
        type: "string"
        required: true
      - name: code
        in: query
        type: string
        required: true
      - name: type
        in: query
        type: string
        required: true
      responses:
        200:
          description: OK
        400:
          description: Invalid Input
      x-swagger-router-controller: "User"

  /advisor:
    post:
      tags:
      - advisor
      summary: create an advisor
      description: create an advisor
      operationId: createAdvisor
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/Advisor'
      responses:
        200:
          description: OK
        400:
          description: 'Invalid input'
      x-swagger-router-controller: "Advisor"
    
    get:
      tags:
      - advisor
      summary: get all the advisor
      description: get all the advisor on the platform
      operationId: getAdvisors
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: following
        in: query
        description: "Filter followed advisors"
        type: boolean
        required: false
      - name: search
        in: query
        type: string
        description: search advices by text
        required: false
      - name: registered
        in: query
        type: string
        required: false
        default: "0,1"
        description: sebi registration status of a
      - name: company
        in: query
        type: string
        default: "0,1"
        required: false
        description: company or individual advisor
      - name: skip
        in: query
        description: skip number of records
        required: false
        default: 0
        type: integer
      - name: limit
        in: query
        type: integer
        required: false
        default: 10 
      - name: orderParam
        in: query
        type: string
        required: false
        enum: [rating, numSubscribers, numAdvices]
        default: rating
        description: sort criteria
      - name: order
        in: query
        type: integer
        required: false
        default: -1
        description: sort criteria

      responses:
        200:
          description: "get advisors"
          schema:
            $ref: "#/definitions/Advisor"
        400:
          description: "Not Authorized"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "Advisor"
  
  /advisor/name:
    get:
      tags:
      - advisor
      summary: search advisor based on firstName and lastName
      description: search advisor based on firstName and lastName
      operationId: fetchAdvisorByName
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: string
        required: true
      - name: name
        in: query
        type: string
        required: false
        description: user name
      - name: skip
        in: query
        description: skip number of records
        required: true
        default: 0
        type: number
      - name: limit
        type: number
        required: true
        in: query
        default: 10
        
      responses:
        200:
          description: "get advisor"
        400:
          description: "Not Authorized"
      x-swagger-router-controller: "Advisor"

  /advisor/allocation:
    get:
      tags:
      - advisor
      summary: get advisor with allocation
      description: get advisor with allocation
      operationId: getAdvisorsWithAllocation
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: string
        required: true
      - name: skip
        in: query
        description: skip number of records
        required: true
        default: 0
        type: number
      - name: limit
        type: number
        required: true
        in: query
        default: 10
        
      responses:
        200:
          description: "get advisor"
        400:
          description: "Not Authorized"
      x-swagger-router-controller: "Advisor"

  /advisor/{advisorId}/allocation:
    get:
      tags:
      - advisor
      summary: get the allocation for a particular advisor
      description: get the allocation object for a particular advisor
      operationId: getAdvisorAllocation
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: string
        required: true
      - name: advisorId
        in: path
        required: true
        description: id of the advisor
        type: string
      
      responses:
        200:
          description: "updated advisor profile"
        400:
          description: "Not Authorized"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "Advisor"
      
  /advisor/{advisorId}:
    get:
      tags:
      - advisor
      summary: get advisor summary
      description: get advisor for id
      operationId: getAdvisorSummary
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: string
        required: true
      - name: advisorId
        in: path
        required: true
        description: advisorId
        type: string
      - name: dashboard
        in: query
        type: integer
        required: false
        default: 0
        description: include dashboard related info
      responses:
        200:
          description: "get advisor"
          schema:
            $ref: "#/definitions/Advisor"
        400:
          description: "Not Authorized"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "Advisor"

  /advisor/{advisorId}/profile:
    put:
      tags:
      - advisor
      summary: update advisor profile
      description: update advisor profile
      operationId: updateAdvisorProfile
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: string
        required: true
      - name: advisorId
        in: path
        required: true
        description: advisorId
        type: string
      - name: body
        in: body
        required: true
        schema: 
          $ref: '#/definitions/AdvisorProfile'
      responses:
        200:
          description: "updated advisor profile"
        400:
          description: "Not Authorized"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "Advisor"
  
  /advisor/{advisorId}/follow:
    post:
      tags:
      - 'advisor'
      summary: follow an advisor
      description: follow an advisor
      operationId: followAdvisor
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: advisorId
        in: path
        type: string
        required: true
      responses:
        200:
          description: OK
      x-swagger-router-controller: "Advisor"

  /advisor/{advisorId}/approve:
    post:
      tags:
      - 'advisor'
      summary: add aproval or approval related message
      description: Approve an advisor
      operationId: approveAdvisor
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: advisorId
        in: path
        type: string
        required: true
      - name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/ApprovalMessage'
      responses:
        200:
          description: OK
      x-swagger-router-controller: "Advisor"

  /advisor/{advisorId}/allocate:
    post: 
      tags:
      - 'advisor'
      summary: Provide allocation to the advisor
      description: Allocate an advisor
      operationId: allocateAdvisor
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: advisorId
        in: path
        type: string
        required: true
      - name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/AllocationAccount'
      responses:
        200:
          description: OK
      x-swagger-router-controller: "Advisor"

    put:
      tags:
      - 'advisor'
      summary: Update the allocation for an advisor
      description: Update the allocation for an advisor
      operationId: updateAllocationForAdvisor
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: advisorId
        in: path
        type: string
        required: true
      - name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/AllocationModification'
      responses:
        200:
          description: OK
      x-swagger-router-controller: "Advisor"

  /advisor/{advisorId}/notAllowedStock:
    post: 
      tags:
      - 'advisor'
      summary: Adds not allowed stock to the advisor's allocation
      description: Adds not allowed stock to the advisor's allocation
      operationId: addNotAllowedStock
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: advisorId
        in: path
        type: string
        required: true
      - name: stock
        in: query
        type: string
        required: true
      responses:
        200:
          description: OK
      x-swagger-router-controller: "Advisor"

  /advisor/{advisorId}/updateAutomated:
    post: 
      tags:
      - 'advisor'
      summary: Updates the automated flag
      description: Updates the automated flag for an advisor's allocation
      operationId: updateAutomatedFlag
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: advisorId
        in: path
        type: string
        required: true
      - name: automated
        in: query
        type: boolean
        required: true
      responses:
        200:
          description: OK
      x-swagger-router-controller: "Advisor"
      

  /advisor/{advisorId}/updatecash:
    put:
      tags:
      - 'advisor'
      summary: Update allocation amount to the advisor
      description: Update cash allocation of an advisor
      operationId: updateAdvisorAllocationAmount
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: advisorId
        in: path
        type: string
        required: true
      - name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/UpdateCash'
      responses:
        200:
          description: OK
      x-swagger-router-controller: "Advisor"

  /advisor/{advisorId}/updatestatus:
    post:
      tags:
      - 'advisor'
      summary: update allocation status to an advisor
      description: Update allocation status of an advisor
      operationId: updateAdvisorAllocationStatus
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: advisorId
        in: path
        type: string
        required: true
      - name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/AllocationStatus'
      responses:
        200:
          description: OK
      x-swagger-router-controller: "Advisor"

  /stock/detail:
    get:
      tags:
      - stock
      summary: get stock history and/or performance detail
      description: get stock history and/or performance detail
      operationId: getStockDetail
      security: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: false
      - name: ticker
        in: query
        type: string
        required: true
        description: security ticker
      - name: exchange
        in: query
        type: string
        required: false
        default: "NSE"
        description: security exchange
      - name: country
        in: query
        type: string
        required: false
        default: "IN"
        description: security country
      - name: securityType
        in: query
        type: string
        required: false
        default: "EQ"
        description: security type
      - name: startDate
        in: query
        type: string
        required: false
        format: date
        description: start date of priceHistory
      - name: endDate
        in: query
        type: string
        required: false
        format: date
        description: end date of priceHistory
      - name: field
        in: query
        type: string
        required: true
        default: "priceHistory"
        enum: ['priceHistory', 'staticPerformance', 'rollingPerformance', 'latestDetail', 'intraDay']
      responses:
        200:
          description: "get stock performance detail"
        400:
          description: "Not Authorized"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "Stock"

  /stock/detail_benchmark:
    get:
      tags:
      - stock
      summary: get stock history of benchmark securities
      description: get stock history of benchmark securities
      operationId: getStockDetailBenchmark
      security: []
      parameters:
      - name: ticker
        in: query
        type: string
        required: true
        description: security ticker
      - name: exchange
        in: query
        type: string
        required: false
        default: "NSE"
        description: security exchange
      - name: country
        in: query
        type: string
        required: false
        default: "IN"
        description: security country
      - name: securityType
        in: query
        type: string
        required: false
        default: "EQ"
        description: security type
      - name: startDate
        in: query
        type: string
        required: false
        format: date
        description: start date of priceHistory
      - name: endDate
        in: query
        type: string
        required: false
        format: date
        description: end date of priceHistory  
      - name: field
        in: query
        type: string
        required: true
        default: "priceHistory" 
      responses:
        200:
          description: "get stock performance detail"
        400:
          description: "Not Authorized"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "Stock"

  /stock:
    get:
      tags:
      - stock
      summary: get stock list matching criteria
      description: get stock list matching criteria
      operationId: getStocks
      security: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: false
      - name: search
        in: query
        type: string
        required: false
        default: ""
      - name: universe
        in: query
        type: string
        required: false
      - name: sector
        in: query
        type: string
        required: false
      - name: industry
        in: query
        type: string
        required: false
      - name: exclude
        in: query
        type: string
        required: false
      - name: populate
        in: query
        type: boolean
        required: false
        default: false
      - name: skip
        in: query
        type: number
        required: false
        default: 0
      - name: limit
        in: query
        type: number
        required: false
        default: 5
      responses:
        200:
          description: "get list of stocks matching criteria"
        400:
          description: "Not Authorized"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "Stock"

  /watchlist:
    post:
      tags:
        - watchlist
      summary: create a watchlist
      description: create a watchlist
      operationId: createWatchlist
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: header
        description: "auth token"
        type: string
        required: true
      - name: userId
        in: query
        type: string
        required: false
        description: "userId of the user for which the watchlist needs to be created"
      - name: body
        in: body
        required: true
        schema:
          $ref: "#/definitions/Watchlist"
      responses:
        200:
          description: OK
        400:
          description: 'Invalid input'
      x-swagger-router-controller: "Watchlist"
    
    get:
      tags:
        - watchlist
      summary: get all watchlists for a user
      description: get all watchlist for a user
      operationId: getAllWatchlists
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: header
        description: "auth token"
        type: string
        required: true
      - name: userId
        in: query
        type: string
        required: false
        description: "userId of the user for which the watchlist needs to be created"
      - name: name
        in: query
        type: string
        required: false
        description: "watchlist name"
      responses:
        200:
          description: OK
        400:
          description: "Not Authorized"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "Watchlist"
  
  /config:
    get:
      tags:
        - config
      summary: Get static configs
      description: get static configurations required in the frontend
      operationId: getConfig
      security: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: false
      - name: type
        in: query
        type: string
        description: type of configuration
        required: false
      - name: benchmark
        in: query
        type: string
        description: benchmark for contest
        required: false
      responses:
        200:
          description: OK
      x-swagger-router-controller: "Config"


  /watchlist/{watchlistId}:
    get:
      tags:
      - watchlist
      summary: Get stock watchlist
      description: retrieve stock watchlist
      operationId: getWatchlist
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: string
        required: true
      - name: userId
        in: query
        type: string
        required: false
        description: "userId of the user for which the watchlist needs to be created"
      - name: watchlistId
        in: path
        required: true
        type: string
      responses:
        200:
          description: "get watchlist"
        400:
          description: "Not Authorized"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "Watchlist"
    
    put:
      tags:
      - watchlist
      summary: Update stock watchlist
      description: Update stock watchlist
      operationId: updateWatchlist
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: string
        required: true
      - name: watchlistId
        in: path
        required: true
        type: string
      - name: userId
        in: query
        type: string
        required: false
        description: "userId of the user for which the watchlist needs to be created"
      - name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/Watchlist'
      responses:
        200:
          description: "updated watchlist"
        400:
          description: "Not Authorized"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "Watchlist"

    delete:
      tags:
      - watchlist
      summary: Delete stock watchlist
      description: delete stock watchlist
      operationId: deleteWatchlist
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: string
        required: true
      - name: userId
        in: query
        type: string
        required: false
        description: "userId of the user for which the watchlist needs to be created"
      - name: watchlistId
        in: path
        required: true
        type: string
      responses:
        200:
          description: "delete watchlist"
        400:
          description: "Not Authorized"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "Watchlist"

  /contest:
    post:
      tags: 
      - contest
      summary: create a contest
      description: create a contest
      operationId: createContest
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/Contest'
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "Contest"
    
    get:
      tags:
      - contest
      summary: get all contests
      description: get all contests
      operationId: getContests
      parameters:
      - name: current
        in: query
        type: boolean
        default: false
        description: Get contests that are valid for participation
        
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "Contest"
      
  /contest/all:
    get:
      tags:
      - contest
      summary: get all contests, active, inactive or all
      description: get all contests, active, inactive or all
      operationId: getAllContests
      parameters:
      - name: active
        in: query
        type: integer
        default: 0
        description: Get all contests (active, inactive or all)
      
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "Contest"
  
  /contest/{contestId}:
    get:
      tags:
      - contest
      summary: get contest summary
      description: get contest description
      operationId: getContest
      parameters:
      - name: contestId
        in: path
        type: string
        required: true
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "Contest"

    patch:
      tags:
      - contest
      summary: update a contest
      description: Update a contest, provide only the details to be updated
      consumes:
      - application/json
      operationId: updateContest
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: contestId
        in: path
        type: string
        required: true
      - name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/ContestPatch'
      responses: 
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "Contest"

  /contest/{contestId}/entries:
    get:
      tags:
      - contest
      summary: get contest enries
      description: Get all the entries in a particular contest
      operationId: getEntriesInContest
      parameters:    
      - name: contestId
        in: path
        type: string
        required: true
      - name: skip
        in: query
        type: integer
        required: false
        default: 0
        description: skip records
      - name: limit
        in: query
        type: integer
        required: false
        default: 10
        description: number of advices required
      responses:
        200:
          description: OK
        400:
          description: Invalid Input
      x-swagger-router-controller: "Contest"
  
  /contest/entry/all/{entryId}:
    get:
      tags:
      - contest
      summary: get the contest entry's rank summary for all contest
      description: Get the advice summary of an advice that is inside the specific contest
      operationId: getContestEntryRankSummaryInAllContests
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: entryId
        in: path
        required: true
        type: string
      responses:
        200:
          description: OK
        400:
          description: Invalid Input
      x-swagger-router-controller: "Contest" 
  
  /contest/entry/{entryId}:
    get:
      tags:
      - contest
      summary: get the contest entry summary inside the contest
      description: Get the advice summary inside the contest
      operationId: getContestEntryRankSummaryInLatestContest
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: entryId
        in: path
        required: true
        type: string
      responses:
        200:
          description: OK
        400:
          description: Invalid Input
      x-swagger-router-controller: "Contest"

  /contest/{entryId}/action:
    post:
      tags:
      - contest
      summary: insert, prohibit or withdraw a contest entry
      description: Insert, Prohibit or Withdraw a conest entry from the Contest
      operationId: updateEntryInContest
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: entryId
        in: path
        required: true
        type: string
      - name: type
        in: query
        type: string
        default: 'enter'
      responses:
        200:
          description: OK
        400:
          description: Invalid Input
      x-swagger-router-controller: "Contest"

  /contest/updateRanks:
    get:
      tags:
      - contest
      summary: update the ranks of all advices of all contests
      description: Update the ranking of all the advices inside a contest
      operationId: updateAllContestRanks
      responses:
        200:
          description: OK
        400:
          description: Invalid Input
      x-swagger-router-controller: "Contest"

  /contest/winneremail:
    get:
      tags:
      - contest
      summary: send email to winners
      description: send email to winners
      operationId: sendEmailToContestWinners
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      responses:
        200:
          description: OK
        400:
          description: Invalid Input
      x-swagger-router-controller: "Contest"

  /contestentry/validate:
    post:
      tags:
      - contestentry
      summary: validate a contest entry
      description: validate a contest entry
      operationId: validateContestEntry
      security: 
        - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/ContestEntry'
      - name: operation
        in: query
        required: true
        type: string
        default: "create"
        enum: ["create", "update"]
      - name: entryId
        in: query
        required: false
        type: string
      responses:
        200:
          description: OK
        400:
          description: 'Invalid input'
      x-swagger-router-controller: "ContestEntry"

  /contestentry/validate_default:
    post:
      tags:
      - contestentry
      summary: validate a contest entry
      description: validate a contest entry
      operationId: validateContestEntry
      security: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: false
      - name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/ContestEntry'
      - name: operation
        in: query
        required: true
        type: string
        default: "create"
        enum: ["create", "update"]
      - name: entryId
        in: query
        required: false
        type: string
      responses:
        200:
          description: OK
        400:
          description: 'Invalid input'
      x-swagger-router-controller: "ContestEntry"

  /contestentry/create:
    post:
      tags:
      - contestentry
      summary: create a contest entry
      description: create a contest entry
      operationId: createContestEntry
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/ContestEntry'
      responses:
        200:
          description: OK
        400:
          description: 'Invalid input'
      x-swagger-router-controller: "ContestEntry"
  
  /contestentry:
    get:
      tags:
      - contestentry
      summary: get all contest entries
      description: get contest entries
      operationId: getContestEntries
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: advisor
        in: query
        type: string
        format: uuid
        required: false
        description: advisor id
      - name: personal
        in: query
        type: string
        required: false
        default: "0,1"
        description: advice owner
      - name: skip
        in: query
        type: integer
        required: false
        default: 0
        description: skip records
      - name: limit
        in: query
        type: integer
        required: false
        default: 10
        description: limit number of entries
      responses:
        200:
          description: OK
        400:
          description: 'Invalid input'
      x-swagger-router-controller: "ContestEntry"

  /contestentry/{entryId}:
    patch:
      tags:
      - contestentry
      summary: update contest entry 
      description: updates the contest entry 
      consumes:
      - application/json
      operationId: updateContestEntry
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: entryId
        in: path
        required: true
        type: string
      - name: body
        in: body
        required: true
        schema: 
          $ref: '#/definitions/ContestEntry'
      responses:
        200:
          description: "updated advice"
        400:
          description: "Not Authorized"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "ContestEntry"
  
    get:
      tags:
      - contestentry
      summary: get contest entry summary 
      description: Get contest entries basic details 
      operationId: getContestEntrySummary
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: entryId
        in: path
        type: string
        required: true
      - name: fullperformance
        in: query
        type: boolean
        default: false
      responses:
        200:
          description: OK
        400:
          description: 'Invalid input'
      x-swagger-router-controller: "ContestEntry"
  
  /contestentry/{entryId}/detail:    
    get:
      tags:
      - contestentry
      summary: get contest entry detail
      description: Gets the complete contest entry detail
      operationId: getContestEntryDetail
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: entryId
        in: path
        type: string
        required: true
      - name: fields
        in: query
        type: string
        default: ""
        required: false
        description: selection fields
      responses:
        200:
          description: OK
        400:
          description: 'Invalid input'
      x-swagger-router-controller: "ContestEntry"

  /contestentry/{entryId}/portfolio:    
    get:
      tags:
      - contestentry
      summary: get contest entry portfolio for any date
      description: Gets the contest entry portfolio for any date
      operationId: getContestEntryPortfolio
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: entryId
        in: path
        type: string
        required: true
      - name: date
        in: query
        type: string
        required: false
        description: date
      - name: history
        in: query
        type: boolean
        default: false
        required: false
        description: portfolio history
      responses:
        200:
          description: OK
        400:
          description: 'Invalid input'
      x-swagger-router-controller: "ContestEntry"  


  /dailycontest/prediction:
    post:
      tags: 
      - dailycontest
      summary: Add stock predictions 
      description: add stock predictions
      operationId: updateDailyContestPredictions
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: advisorId
        required: false
        in: query
        description: advisorId of the user for which the prediction is to be made
        type: string
      - name: body
        in: body
        required: true
        description: "schema body"
        schema:
          $ref: "#/definitions/StockPrediction"
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"

    get:
      tags: 
      - dailycontest
      summary: get the daily contest entry for user
      description: get a daily contest user
      operationId: getDailyContestPredictions
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: date
        in: query
        type: string
        format: date
        description: date of contest
        required: false
      - name: category
        in: query
        type: string
        description: status of prediction
        default: "all"
        enum: ["started", "ended", "all"]
        required: false
      - name: advisorId
        required: false
        in: query
        description: advisorId of the user for which the prediction is to be made
        type: string
      - name: real
        required: false
        in: query
        description: flag to fetch real trade predictions
        type: boolean
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"

    put:
      tags:
      - dailycontest
      summary: Update predicitons for admin modifications
      description: Add modifications to real predictions (by admin)
      operationId: addAdminModificationsToPrediction
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: body
        in: body
        description: admin modifications
        required: true
        schema:
          $ref: "#/definitions/AdminModification"
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"

  /dailycontest/realprediction/update:
    put:
      tags:
      - dailycontest
      summary: update the real prediction
      description: update the real prediction only by admin
      operationId: updateRealPrediction
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: body
        in: body
        description: modifications required
        required: true
        schema:
          $ref: "#/definitions/RealPredictionModification"
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"


  /dailycontest/realpredictions:
    get:
      tags: 
      - dailycontest
      summary: get real trade predictions for user (or all)
      description: get real trade predictons
      operationId: getRealTradePredictions
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: date
        in: query
        type: string
        format: date
        description: date of activity
        required: false
      - name: advisorId
        required: false
        in: query
        description: advisorId for real predictions
        type: string
      - name: category
        in: query
        type: string
        description:  date status of prediction
        default: "all"
        enum: ["started", "ended", "all"]
      - name: active
        in: query
        type: boolean
        description: active status of prediction

      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"

  /dailycontest/tradeactivity:
    post:
      tags:
      - dailycontest
      summary: Add trade activity information for prediction
      description: Add trade activity
      operationId: addPredictionTradeActivity
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: body
        in: body
        description: trade activity body
        required: true
        schema:
          $ref: "#/definitions/PredictionTradeActivity"
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"

  /dailycontest/placeorder:
    post:
      tags:
      - dailycontest
      summary: Place a trade in prediction
      description: Place a trade for prediction
      operationId: placeOrderForPrediction
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: body
        in: body
        description: order body
        required: true
        schema:
          $ref: "#/definitions/PlaceOrder"
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"

  /dailycontest/getThirdPartyPredictions:
    post:
      tags:
      - dailycontest
      summary: Get predictions from 3rd party websites
      description: Get predictions from Kotak Securities, Motilal Oswal
      operationId: getThirdPartyPredictions
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: source
        in: query
        type: string
        description: Third party website where the predictions should be obtained from
        required: true
        default: 'kotak'
        enum: ['kotak', 'motilal']
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"
  
  /dailycontest/modifyorder:
    post:
      tags:
      - dailycontest
      summary: Modify order for prediction
      description: Modify order for prediction
      operationId: modifyOrderForPrediction
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: body
        in: body
        description: order body
        required: true
        schema:
          $ref: "#/definitions/ModifyOrder"
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"

  /dailycontest/cancelorder:
    post:
      tags:
      - dailycontest
      summary: Cancel a trade in prediction
      description: Cancel a trade in prediction
      operationId: cancelOrderForPrediction
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: body
        required: true
        in: body
        description: cancel order body
        schema:
          $ref: '#/definitions/CancelOrder'
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"


  /dailycontest/readstatus:
    post:
      tags:
      - dailycontest
      summary: Update read status of the prediction
      description: update read status of prediction
      operationId: updateReadStatusPrediction
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: body
        in: body
        description: read status
        required: true
        schema:
          $ref: "#/definitions/ReadStatus"
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"      
    
  /dailycontest/skipPrediction:
    post:
      tags:
      - dailycontest
      summary: set skippedByAdmin flag to flag
      description: Skips a prediction
      operationId: updateSkipStatusPrediction
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: body
        in: body
        description: read status
        required: true
        schema:
          $ref: "#/definitions/SkipStatus"
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"   

  /dailycontest/exitPrediction:
    post:
      tags: 
      - dailycontest
      summary: Exit stock prediction 
      description: exit stock predictions
      operationId: exitDailyContestPrediction
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: predictionId
        in: query
        description: prediction id
        type: string
        required: true 
      - name: advisorId
        in: query
        description: advisor id
        type: string
        required: false 
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"

  /dailycontest/pnl:
    get:
      tags: 
      - dailycontest
      summary: get the pnl of contest entry
      description: get the pnl of contest entry
      operationId: getDailyContestPnlForDate
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: date
        in: query
        type: string
        format: date
        description: date of contest
        required: false
      - name: category
        in: query
        type: string
        description: status of prediction
        default: "all"
        enum: ["all", "ended", "started"]
        required: false
      - name: advisorId
        required: false
        in: query
        description: advisorId of the user for which the prediction is to be made
        type: string
      - name: real
        required: false
        in: query
        description: flag for real/simulated predictions
        type: boolean

      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"

    post:
      tags:
      - dailycontest
      summary: update daily contest pnl-stats (run job)
      description: update daily contest pnl-stats (run job)
      operationId: updateDailyContestPnlForDate
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      responses:
        200:
          description: OK
        400:
          description: Invalid Input
      x-swagger-router-controller: "DailyContest"

  /dailycontest/portfoliostats:
    get:
      tags: 
      - dailycontest
      summary: get the portfolio-stats of contest entry
      description: get the portfolio-stats of contest entry
      operationId: getDailyContestPortfolioStatsForDate
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: date
        in: query
        type: string
        format: date
        description: date of contest
        required: false
      - name: advisorId
        required: false
        in: query
        description: advisorId of the user for which the prediction is to be made
        type: string
      - name: real
        required: false
        in: query
        description: flag for real/simulated predictions
        type: boolean
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"


  /dailycontest/topstocks:
    get:
      tags: 
      - dailycontest
      summary: get top stocks for the contest 
      description: get top stocks for the contest
      operationId: getDailyContestTopStocks
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: date
        in: query
        type: string
        format: date
        description: date of contest
        required: false
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"

    post:
      tags:
      - dailycontest
      summary: update daily contest top stocks (run job)
      description: update daily contest tops stocks (run job)
      operationId: updateDailyContestTopStocks
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      responses:
        200:
          description: OK
        400:
          description: Invalid Input
      x-swagger-router-controller: "DailyContest"

  /dailycontest/leaderboard:
    get:
      tags: 
      - dailycontest
      summary: get winners of daily contest
      description: get winners of daily contest
      operationId: getDailyContestWinners
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: date
        in: query
        type: string
        format: date
        description: date of contest
        required: false
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"
  
  /dailycontest/overallWinners:
    get:
      tags: 
      - dailycontest
      summary: get overall winners of daily contest
      description: get overall winners of daily contest
      operationId: getDailyContestOverallWinners
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: skip
        in: query
        type: integer
        required: false
        default: 0
        description: skip records
      - name: limit
        in: query
        type: integer
        required: false
        default: 10
        description: number of documents required
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"

  /dailycontest/stats:
    get:
      tags: 
      - dailycontest
      summary: get stats for users
      description: get stats for users
      operationId: getDailyContestStats
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: advisor
        in: query
        required: false
        type: string
        description: advisor id of the user for whom stats required
      - name: category
        in: query
        required: false
        type: string
        default: "general"
        enum: ["general", "pnl", "prediction"]
      - name: symbol
        in: query
        type: string
        description: symbol for stats
        required: false
      - name: horizon
        in: query
        type: number
        description: horizon for stats
        required: false
      - name: real
        required: false
        in: query
        description: flag to fetch real trade predictions
        type: boolean
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"


  /dailycontest/performance:
    get:
      tags: 
      - dailycontest
      summary: get portfolio stats for users
      description: get portfolio stats for users
      operationId: getDailyContestPerformanceStats
      security: 
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: advisor
        in: query
        required: false
        type: string
        description: advisor id of the user for whom stats required
      - name: real
        required: false
        in: query
        description: flag for real/simulated predictions
        type: boolean
      responses:
        200:
          description: OK
        400:
          description: 'Invalid Input'
      x-swagger-router-controller: "DailyContest"

  /dailycontest/winneremail:
    get:
      tags:
      - dailycontest
      summary: send email to winners
      description: send email to winners
      operationId: sendEmailToDailyContestWinners
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: date
        in: query
        description: date
        type: string
        format: date 
        required: false
      - name: weekly
        in: query
        description: Weekly flag
        type: boolean
        required: false
      responses:
        200:
          description: OK
        400:
          description: Invalid Input
      x-swagger-router-controller: "DailyContest"

  /dailycontest/summaryemail:
    get:
      tags:
      - dailycontest
      summary: send email to winners
      description: send email to winners
      operationId: sendSummaryEmailToParticipants
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: date
        in: query
        description: date
        type: string
        format: date 
        required: false
      responses:
        200:
          description: OK
        400:
          description: Invalid Input
      x-swagger-router-controller: "DailyContest"

  /dailycontest/templateemail:
     get:
      tags:
      - dailycontest
      summary: send tempate email to contest participants
      description: send tempate email to contest participants
      operationId: sendTemplateEmailToParticipants
      security:
      - api_key: []
      parameters:
      - name: "aimsquant-token"
        in: "header"
        description: "auth token"
        type: "string"
        required: true
      - name: emailType
        in: query
        type: string
        default: "all"
        description: sendgrid templateId
        required: true
      responses:
        200:
          description: OK
        400:
          description: Invalid Input
      x-swagger-router-controller: "DailyContest"

securityDefinitions:
  api_key:
    type: apiKey
    name: aimsquant-token
    in: header

definitions:
  User:
    type: "object"
    required:
    - firstName
    - lastName
    - email
    - password
    properties:
      firstName:
        type: "string"
      lastName:
        type: "string"
      email:
        type: "string"
      password:
        type: "string"
      phone:
        type: "string"
      photo:
        type: "string"
      aboutme:
        type: "string"
      education:
        type: "string"
      profession:
        type: "string"

  Login:
    type: "object"
    properties:
      email:
        type: "string"
      password:
        type: "string"

  GoogleLogin:
    type: object
    properties:
      accessToken:
        type: string
  
  Thread:
    type: object
    required:
    - category
    - title
    - markdownText
    properties:
      category:
        type: string
        enum:
        - "Share your Idea"
        - "Questions and Answers"
        - "News and Announcements"
      title:
        type: string
      markdownText:
        type: string
      backtestId:
        type: string
  
  resetpassword:
    type: object
    required:
    - password1
    - password2
    - code
    properties:
      password1:
        type: "string"
      password2:
        type: "string"
      code:
        type: "string"
        format: "uuid"

  updateToken:
    type: object
    required:
      - token
      - email
    properties:
      token:
        type: string
      email:
        type: string
      force:
        type: boolean
        default: false

  captchaToken:
    type: object
    required:
      - token
    properties:
      token:
        type: string
  
  Error:
    type: "object"
    properties:
      code:
        type: "string"
      message:
        type: "string"

# strategy definitions
  Strategy:
    type: object
    required:
    - name
    - type
    - description
    properties:
      name:
        type: string
      type:
        type: string
        enum: ['GUI', 'CODE']
      description:
        type: string
      code:
        type: string
      entryConditions:
        type: array
        items:
          $ref: "#/definitions/TradeCondition"
      exitConditions:
        type: array
        items:
          $ref: "#/definitions/TradeCondition"
      entryLogic:
        type: string
      exitLogic:
        type: string
      tradeDirection:
        type: string

  
  TradeCondition:
    type: object
    required:
      - indicator1
      - indicator2
      - operator
      - name
    properties:
      indicator1:
        $ref: "#/definitions/TradeIndicator"
      indicator2:
        $ref: "#/definitions/TradeIndicator"
      operator:
        type: string
        enum: ["LT", "LTE", "GT", "GTE", "EQ", "CA", "CB"]
      name:
        type: string

  TradeIndicator:
    type: object
    required:
      - name
      - params
    properties:
      name:
        type: string
      params:
        type: object 


  BacktestSettings:
    type: object
    required:
      - startDate
      - endDate
      - initialCash
    properties:
      startDate:
        type: string
      endDate:
        type: string
      initialCash:
        type: number
        format: long
      universe:
        type: string
      advanced:
        type: string  

  Backtest:
    type: object
    required:
      - settings
    properties:
      settings:
        $ref: "#/definitions/BacktestSettings"

  Forwardtest:
    type: object
    required:
      - strategyId
      - backtestId
    properties:
      strategyId:
        type: string
      backtestId:
        type: string

  Feedback:
    type: object
    required:
    - feedback
    - subject
    - from
    - to
    properties:
      feedback:
        type: string
      subject:
        type: string
      from:
        type: string
      to:
        type: string
        default: "feedback@aimsquant.com"
  
  invite:
    type: object
    required:
    - emailList
    properties:
      emailList:
        type: string

  infoEmail:
    type: object
    required:
    - templateFileName
    - subject
    properties:
      templateFileName:
        type: string
      subject:
        type: string

#Security
  Security:
    type: object
    required:
      - ticker
      #- securityType
      #- country
      #- exchange
    properties:
      ticker:
        type: string
      securityType: 
        type: string
        default: "EQ"
      country:
        type: string
        default: "IN"
      exchange:
        type: string
        default: "NSE"

#Position
  Position:
    type: object
    required:
      - security
    properties:
      security:
        $ref: '#/definitions/Security'
      investment:
        type: number
        format: number
        default: 0.0  
      quantity:
        type: number
        format: long
        default: 0
      avgPrice:
        type: number
        default: 0.0

#Transaction
  Transaction:
    type: object
    required:
      - security
      - quantity
      - date
    properties:
      security:
        $ref: '#/definitions/Security'
      quantity:
        type: integer
      price:
        type: number
        default: 0.0
      fee:
        type: number
      date:
        type: string
        format: date
      commission:
        type: number
        default: 0.0
      cashLinked:
        type: boolean
        default: false
      advice:
        type: string
        format: uuid
        default: ""
      _id:
        type: string
        format: uuid
        default: ""

  TransactionsAction:
    type: object
    required:
      - preview
      - action
      - transactions     
    properties:
      preview:
        type: boolean
        default: true
      action:
        type: string
        enum: ["add", "update", "delete"]
        default: "add"
      transactions: 
        type: array
        items:
          $ref: '#/definitions/Transaction'

#CreatePortfolio
  CreatePortfolio:
    type: object
    required:
      - name
      - benchmark
      - transactions
      - preview
    properties:
      name:
        type: string
      benchmark:
        $ref: '#/definitions/Security'
      transactions:
        type: array
        items:
          $ref: '#/definitions/Transaction'
      preview: 
        type: boolean
        default: true
      setdefault:
        type: boolean
        default: false

#PortfolioDetail
  PortfolioDetail:
    type: object
    required:
      - positions
      - cash
      - positionType
    properties:
      startDate:
        type: string
        format: date
      endDate:
        type: string
        format: date
      positions:
        type: array
        items:
          $ref: '#/definitions/Position'
      cash:
        type: number
        default: 0.0
      positionType:
        type: string
        default: 'shares'
        enum: ['shares', 'notional']
    
#Portfolio
  Portfolio:
    type: object
    required:
        - detail
        - benchmark 
    properties:
      name:
        type: string
        default: ""
      detail:
        $ref: '#/definitions/PortfolioDetail'
      benchmark:
        $ref: '#/definitions/Security'
      
#Advice definition
  Advice:
    type: object
    required:
      - name
      - portfolio
      - rebalance
      - maxNotional
      - investmentObjective
    properties:
      name:
        type: string
      portfolio:
        $ref: "#/definitions/Portfolio"
      rebalance:
        type: string
        enum: ['Daily', 'Weekly', 'Bi-Weekly', 'Monthly', 'Quartely']
      maxNotional:
        type: integer
        enum: [10000, 20000, 50000, 75000, 100000, 200000, 300000, 500000, 750000, 1000000]
      investmentObjective:
        $ref: '#/definitions/InvestmentObjective'
      public:
        type: boolean
        default: false
      contestOnly:
        type: boolean
        default: false


#Investor
  Investor:
    type: object
     
# Advisor definitions
  Advisor:
    type: object

# Advisor Profile
  AdvisorProfile:
    type: object
    properties:
      isCompany: 
        type: boolean
        default: false
      companyName: 
        type: string
        default: ""
      companyRegistrationNum:
        type: string
        default: ""
      isSebiRegistered: 
        type: boolean
        default: false
      sebiRegistrationNum:
        type: string
        default: ""
      webUrl: 
        type: string
        default: ""
      photoUrl:
        type: string
        default: ""
      address: 
        $ref: '#/definitions/Address'
      phone: 
        type: string
        default: ""
      linkedIn:
        $ref: '#/definitions/SocialProfile'
      facebook: 
        $ref: '#/definitions/SocialProfile'
      twitter:
        $ref: '#/definitions/SocialProfile'

# Watchlist definitions
  Watchlist:
    type: object
    required:
      - name
      - securities
    properties:
      name:
        type: string
      securities:
        type: array
        items:
          $ref: '#/definitions/Security'

  Address:
    type: object
    properties:
      line1:
        type: string
        default: ""
      line2:
        type: string
        default: ""
      line3:
        type: string
        default: ""
      city: 
        type: string
        default: ""
      state: 
        type: string
        default: ""
      pincode: 
        type: number
      country:
        type: string
        default: "IN"

  ApprovalMessage:
    type: object
    required:
      - message
      - approved
      - prohibit
    properties:
      message: 
        type: string
      approved:
        type: boolean
      prohibit:
        type: boolean

  ApprovalMessageNew:
    type: object
    required:
      - message
      - status
    properties:
      message:
       type: string
      status:
        type: boolean
      detail:
        type: array
        items:
          $ref: '#/definitions/Approval'
      investmentObjective:
        $ref: '#/definitions/InvestmentObjective'
  
  Approval:
    type: object
    required:
      - field
    properties:
      field: 
        type: string
      reason:
        type: string
      valid:
        type: boolean
        default: false
      requirements:
        type: array
        items: 
          type: string
  
  InvestmentObjective:
    type: object
    properties:
      goal: 
        type: object
        $ref: '#/definitions/Goal'
      sectors: 
        type: object
        $ref: '#/definitions/Sectors'
      portfolioValuation: 
        type: object
        $ref: '#/definitions/PortfolioValuation'
      capitalization: 
        type: object
        $ref: '#/definitions/Capitalization'
      userText: 
        type: object
        $ref: '#/definitions/UserText'
      
  Goal:
    type: object
    required:
      - field
    properties: 
      field:
        type: string
      investorType:
        type: string
      suitability:
        type: string
      valid:
        type: boolean
        default: false
      reason:
        type: string
  
  Sectors:
    type: object
    properties:
      detail:
        type: array
        items:
          type: string
      valid:
        type: boolean
        default: false
      reason:
        type: string
  
  PortfolioValuation:
    type: object
    properties:
      field:
        type: string
        enum: ['Growth', 'Value', 'Blend']
      valid:
        type: boolean
        default: false
      reason:
        type: string
  
  Capitalization:
    type: object
    properties:
      field:
        type: string
        enum: ['Small Cap', 'Mid Cap', 'Large Cap']
      valid:
        type: boolean
        default: false
      reason:
        type: string
 
  UserText:
    type: object
    properties:
      detail:
        type: string
        # default: "Sample Description"
      valid:
        type: boolean
        default: false
      reason:
        type: string    

  SocialProfile:
    type: object
    properties:
      url:
        type: string
      photoUrl: 
        type: string
      userId:
        type: string

  ContestEntry:
    type: object
    required:
      - name
      - portfolio
    properties:
      name: 
        type: string
      portfolio:
        $ref: "#/definitions/Portfolio"

  Contest:
    type: object
    required:
      - name
      - startDate
      - endDate
      - active
      - rules
    properties:
      name:
        type: string
      startDate:
        type: string
        format: date
      endDate:
        type: string
        format: date
      active:
        type: boolean
        default: false
      rules:
        type: object
        $ref: '#/definitions/ContestRules'
  
  ContestPatch:
    type: object
    properties:
      name:
        type: string
      startDate:
        type: string
        format: date
      endDate:
        type: string
        format: date
      active:
        type: boolean
        default: true
      rules:
        type: object
        $ref: '#/definitions/ContestRules'

  ContestRules:
    type: object
    required:
      - prize
      - ruleTemplateFileName
    properties:
      prize:
        type: array
        items: 
          $ref: '#/definitions/ContestPrize'
      ruleTemplateFileName:
        type: string
    
  ContestPrize:
    type: object
    required:
      - rank
      - value
    properties: 
      rank:
        type: number
      value:
        type: number

  StockPrediction:
    type: object
    required:
      - position
      - startDate
      - endDate
      - target
    properties:
      position:
        type: object
        $ref: '#/definitions/Position'
      startDate:
        type: string
        format: date
      endDate:
        type: string
        format: date
      target:
        type: number
      stopLoss:
        type: number
        default: -1
      conditionalType:
        type: string
        default: "NOW"
        enum: ["NOW", "CROSS", "LIMIT"]
      real:
        type: boolean
        default: false
    

  AllocationAccount:
    type: object
    required:
      - cash
      - notes
      - maxInvestment
      - minInvestment
      - automated
    properties:
      cash:
        type: number
      notes:
        type: string
      maxInvestment:
        type: number
        default: 50
      minInvestment:
        type: number
        default: 10
      notAllowedStocks:
        type: array
        items:
          type: string
      automated:
        type: boolean
        default: false
      allowedInvestments:
        type: array
        default: [10, 25, 50]
        items: 
          type: number

  UpdateCash:
    type: object
    required:
      - cash
      - notes
    properties:
      cash:
        type: number
      notes:
        type: string

  AllocationStatus:
    type: object
    required:
      - status
      - notes
    properties:
      status:
        type: boolean
      notes:
        type: string


  PredictionTradeActivity:
    type: object
    required:
      - predictionId
      - advisorId
      - tradeActivity
    properties:
      predictionId:
        type: string
        format: uuid
      advisorId: 
        type: string
        format: uuid
      tradeActivity:
        type: object
        $ref: '#/definitions/TradeActivity'

  PlaceOrder:
    type: object
    required:
      - predictionId
      - advisorId
      - order
    properties:
      predictionId:
        type: string
        format: uuid
      advisorId: 
        type: string
        format: uuid
      order:
        type: object
        $ref: '#/definitions/Order'
      message:
        type: string
      
  ModifyOrder:
    type: object
    required:
      - advisorId
      - orderId
      - stock
      - tradeDirection
      - quantity
      - price
      - orderType
      - predictionId
    properties:
      orderId:
        type: number
      stock:
        type: string
      tradeDirection:
        type: string
      quantity:
        type: number
      price:
        type: number
      orderType:
        type: string
      tif:
        type: string
      advisorId: 
        type: string
        format: uuid
      predictionId: 
        type: string
        format: uuid


  CancelOrder:
    type: object
    required:
      - orderId
      - advisorId
      - predictionId
    properties:
      orderId:
        type: number
      advisorId:
        type: string
        format: uuid
      predictionId:
        type: string
        format: uuid
      message:
        type: string
  
  Order:
    type: object
    required: 
      - symbol
      - tradeDirection
      - quantity
    properties:
      symbol:
        type: string
      orderType:
        type: string
        enum: ["bracket", "limit", "market", "stopLimit", "marketClose", "marketIfTouched"]
      quantity:
        type: number
      price:
        type: number
      tradeDirection:
        type: string
        enum: ["BUY", "SELL"]
      bracketFirstOrderType:
        type: string
        enum: ["LIMIT", "MARKET"]
      stopLossPrice:
        type: number
      profitLimitPrice:
        type: number
  
  TradeActivity:
    type: object
    required:
      - date
      - direction
      - quantity
      - price
    properties:
      date:
        type: string
        format: date
      direction:
        type: string
        default: "BUY"
        enum: ["BUY", "SELL"]
      quantity:
        type: number
      price:
        type: number
      brokermessage:
        type: object
      automated:
        type: boolean
        default: false
      notes:
        type: string


  ReadStatus:
    type: object
    required:
      - predictionId
      - advisorId
      - readStatus
    properties:
      predictionId:
        type: string
        format: uuid
      advisorId: 
        type: string
        format: uuid
      readStatus:
        type: string
        default: "UNREAD" 
        enum: ["UNREAD", "READ/ACTED", "READ/NOT-ACTED"]
    
  SkipStatus:
    type: object
    required:
      - predictionId
      - advisorId
    properties:
      predictionId:
        type: string
        format: uuid
      advisorId:
        type: string
        format: uuid
      message:
        type: string

  AdminModification:
    type: object
    required:
      - predictionId
      - advisorId
      - modification
    properties:
      predictionId:
        type: string
        format: uuid
      advisorId: 
        type: string
        format: uuid
      modification:
        type: object

  RealPredictionModification:
    type: object
    required:
      - predictionId
      - advisorId
      - avgPrice
    properties:
      predictionId:
        type: string
        format: uuid
      advisorId:
        type: string
        format: uuid
      avgPrice:
        type: number

  AllocationModification:
    type: object
    properties:
      modifications:
        type: object